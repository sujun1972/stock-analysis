# 任务 1.2 测试指南

## 🚀 快速测试

### 1. 启动前端服务
```bash
cd frontend
npm run dev
```

### 2. 测试路由

访问以下URL测试不同组件的详情页：

#### 选股器详情页（4个）
```bash
# 动量选股器
http://localhost:3000/strategies/momentum

# 反转选股器
http://localhost:3000/strategies/reversal

# 机器学习选股器
http://localhost:3000/strategies/ml_selector

# 外部信号选股器
http://localhost:3000/strategies/external
```

#### 入场策略详情页（3个）
```bash
# 立即入场
http://localhost:3000/strategies/immediate

# 均线突破
http://localhost:3000/strategies/ma_breakout

# RSI超卖
http://localhost:3000/strategies/rsi_oversold
```

#### 退出策略详情页（4个）
```bash
# 固定止损
http://localhost:3000/strategies/fixed_stop_loss

# ATR止损
http://localhost:3000/strategies/atr_stop

# 趋势退出
http://localhost:3000/strategies/trend_exit

# 固定周期
http://localhost:3000/strategies/fixed_period
```

---

## ✅ 测试检查清单

### 基础功能测试

#### 页面加载
- [ ] 页面正常加载，无报错
- [ ] 加载状态显示Spinner和提示文字
- [ ] 组件信息正确展示

#### 组件信息展示
- [ ] 组件名称和描述正确
- [ ] 层级标签正确（选股器/入场/退出）
- [ ] 版本号显示正确
- [ ] 参数数量正确

#### Tabs导航
- [ ] 三个Tab标签都能点击
- [ ] Tab切换流畅，无卡顿
- [ ] 默认显示"概览"Tab
- [ ] 切换后内容正确更新

#### 概览Tab
- [ ] 组件类型说明显示
- [ ] 基本信息卡片完整（ID、名称、版本、参数数量）
- [ ] 风险评估显示正确
- [ ] 适用场景标签正确
- [ ] 完整描述显示

#### 参数配置Tab
- [ ] 有参数的组件显示参数表格
- [ ] 无参数的组件显示友好的空状态
- [ ] 表格列信息完整（名称、类型、默认值、范围、说明）
- [ ] 参数调优建议显示

#### 使用指南Tab
- [ ] 快速开始步骤显示
- [ ] 策略配置示例代码正确
- [ ] API调用示例代码正确
- [ ] 组合建议显示
- [ ] FAQ显示

#### 交互功能
- [ ] "返回策略列表"按钮可点击，跳转正确
- [ ] "立即回测"按钮可点击，跳转正确（带参数）
- [ ] "浏览其他策略"按钮可点击
- [ ] "复制代码"按钮点击后显示"已复制"
- [ ] 代码确实复制到剪贴板

#### 错误处理
- [ ] 访问不存在的ID显示错误页面
- [ ] 错误页面有友好提示
- [ ] 有返回按钮

---

## 🎨 UI/UX测试

### 响应式设计
- [ ] 桌面端（>1024px）显示正常
- [ ] 平板端（768-1024px）显示正常
- [ ] 移动端（<768px）显示正常
- [ ] 参数表格在小屏幕可横向滚动

### 暗色模式
- [ ] 切换到暗色模式后所有颜色适配正确
- [ ] Badge颜色在暗色模式下清晰可见
- [ ] 代码块背景适配暗色模式

### 视觉一致性
- [ ] 层级标签颜色正确（蓝/绿/橙）
- [ ] 风险等级颜色正确（绿/黄/橙）
- [ ] 字体大小和间距合理
- [ ] 图标和文字对齐

---

## 🔍 深度测试场景

### 场景1：有参数的选股器
1. 访问 `/strategies/momentum`
2. 检查参数配置Tab显示3个参数表格
3. 检查使用指南中代码示例包含这些参数
4. 检查默认值填充正确

### 场景2：无参数的入场策略
1. 访问 `/strategies/immediate`
2. 检查参数配置Tab显示"无需配置"提示
3. 检查使用指南中代码示例params为空对象`{}`
4. 检查有"开箱即用"说明

### 场景3：完整流程测试
1. 从策略列表页 `/strategies` 点击某个策略的"查看详情"
2. 进入详情页，浏览三个Tab
3. 在"使用指南"Tab复制代码
4. 点击"立即回测"按钮
5. 检查是否跳转到 `/backtest/three-layer?[layer]=[id]`
6. 检查三层回测页面是否预选了该组件

### 场景4：风险评估测试
测试不同组件的风险等级：
- ML选股器 → 中高风险（橙色）
- 固定止损 → 低风险（绿色）
- 动量选股 → 中风险（黄色）

### 场景5：组合建议测试
- 选股器详情页 → 推荐入场+退出
- 入场策略详情页 → 推荐选股+退出
- 退出策略详情页 → 推荐选股+入场

---

## 🐛 已知问题和注意事项

### 后端依赖
- ⚠️ 需要后端API正常运行：`/api/three-layer/selectors`, `/api/three-layer/entries`, `/api/three-layer/exits`
- ⚠️ 如果后端未启动，页面会显示"加载策略组件失败"错误

### 浏览器兼容性
- ✅ Chrome/Edge（推荐）
- ✅ Firefox
- ✅ Safari
- ⚠️ IE不支持（Next.js不支持）

### 性能
- ✅ 首次加载：并行3个API请求
- ✅ 页面大小：~147KB First Load JS
- ✅ 响应速度：<1秒（本地）

---

## 📊 测试报告模板

复制以下模板进行测试记录：

```
## 测试日期：YYYY-MM-DD
## 测试人：[姓名]

### 环境信息
- 操作系统：
- 浏览器：
- 屏幕尺寸：
- 后端状态：运行中/未运行

### 测试结果
#### 基础功能（/15）
- 页面加载：✅/❌
- 组件信息展示：✅/❌
- Tabs导航：✅/❌
- 概览Tab：✅/❌
- 参数配置Tab：✅/❌
- 使用指南Tab：✅/❌
- 交互功能：✅/❌
- 错误处理：✅/❌
- ...

#### UI/UX（/10）
- 响应式设计：✅/❌
- 暗色模式：✅/❌
- 视觉一致性：✅/❌
- ...

### 发现的问题
1. [问题描述]
   - 复现步骤：
   - 严重程度：低/中/高
   - 截图：

### 改进建议
1. [建议内容]

### 总体评价
- 功能完整度：%
- 用户体验：优秀/良好/一般/差
- 推荐上线：是/否
```

---

## 🎯 自动化测试（可选）

如果需要编写自动化测试，可以参考以下测试用例：

```typescript
// frontend/src/components/strategies/__tests__/StrategyDetail.test.tsx

describe('StrategyDetail', () => {
  it('应该正确加载选股器详情', async () => {
    // Mock API响应
    // 渲染组件
    // 检查元素存在
  })

  it('应该正确加载入场策略详情', async () => {
    // ...
  })

  it('应该正确加载退出策略详情', async () => {
    // ...
  })

  it('应该处理组件未找到的情况', async () => {
    // ...
  })

  it('应该正确显示有参数的组件', async () => {
    // ...
  })

  it('应该正确显示无参数的组件', async () => {
    // ...
  })

  it('应该正确复制代码到剪贴板', async () => {
    // ...
  })
})
```

---

## 📞 支持

如有问题，请联系：
- GitHub Issues: [项目地址]
- 文档：[frontend/TASK_1.2_COMPLETION.md](TASK_1.2_COMPLETION.md)

---

**最后更新**: 2026-02-07
**版本**: v1.0
