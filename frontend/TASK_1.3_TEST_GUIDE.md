# 任务 1.3 测试指南：导航栏更新

> **测试版本**: v1.0
> **测试日期**: 2026-02-07
> **测试范围**: 桌面端和移动端导航栏

---

## 📋 测试清单

### 一、桌面端导航测试

#### 1.1 导航项显示测试

**测试步骤**：
1. 在浏览器中打开 `http://localhost:3000`
2. 检查顶部导航栏是否显示以下菜单项（从左到右）：

- [ ] 首页
- [ ] 策略中心
- [ ] 三层回测
- [ ] 传统回测
- [ ] 我的回测
- [ ] AI实验舱
- [ ] 数据同步
- [ ] 股票列表
- [ ] 系统设置

**预期结果**：所有 9 个导航项按顺序显示

---

#### 1.2 导航链接功能测试

**测试步骤**：点击每个导航项，验证是否跳转到正确的页面

| 导航项 | 点击后 URL | 页面标题 | 状态 |
|--------|-----------|---------|------|
| 首页 | `/` | Stock Analysis | ✅ |
| 策略中心 | `/strategies` | 策略中心 | ✅ |
| 三层回测 | `/backtest/three-layer` | 三层架构回测 | ✅ |
| 传统回测 | `/backtest` | 策略回测 | ✅ |
| 我的回测 | `/my-backtests` | 404（待开发） | ⚠️ |
| AI实验舱 | `/ai-lab` | AI 实验舱 | ✅ |
| 数据同步 | `/sync` | 数据同步 | ✅ |
| 股票列表 | `/stocks` | 股票列表 | ✅ |
| 系统设置 | `/settings` | 系统设置 | ✅ |

**预期结果**：
- ✅ 已完成页面正常跳转并显示内容
- ⚠️ "我的回测"显示 404 是正常的（页面待开发）

---

#### 1.3 当前页面高亮测试

**测试步骤**：
1. 访问不同页面
2. 检查对应导航项是否高亮（蓝色文字）

| 当前 URL | 应该高亮的导航项 | 测试结果 |
|----------|----------------|---------|
| `/` | 首页 | [ ] 通过 |
| `/strategies` | 策略中心 | [ ] 通过 |
| `/strategies/momentum` | 策略中心 | [ ] 通过 |
| `/backtest/three-layer` | 三层回测 | [ ] 通过 |
| `/backtest` | 传统回测 | [ ] 通过 |
| `/my-backtests` | 我的回测 | [ ] 通过 |
| `/ai-lab` | AI实验舱 | [ ] 通过 |
| `/sync` | 数据同步 | [ ] 通过 |
| `/stocks` | 股票列表 | [ ] 通过 |
| `/settings` | 系统设置 | [ ] 通过 |

**预期结果**：
- 当前页面的导航项显示为蓝色（`text-blue-600`）
- 其他导航项显示为灰色（`text-gray-700`）

**特别注意**：
- 访问 `/strategies/momentum` 时，"策略中心"应该高亮（前缀匹配）
- 访问 `/` 时，只有"首页"高亮，不会误高亮其他项（精确匹配）

---

#### 1.4 暗色模式测试

**测试步骤**：
1. 切换系统到暗色模式（或使用浏览器开发者工具模拟）
2. 检查导航栏背景和文字颜色

**预期结果**：
- [ ] 导航栏背景：深灰色（`dark:bg-gray-800`）
- [ ] 高亮导航项：蓝色（`dark:text-blue-400`）
- [ ] 普通导航项：浅灰色（`dark:text-gray-300`）
- [ ] Hover 效果：蓝色（`dark:hover:text-blue-400`）

---

#### 1.5 响应式测试（桌面端隐藏条件）

**测试步骤**：
1. 调整浏览器窗口宽度到小于 768px
2. 检查桌面端导航栏是否隐藏

**预期结果**：
- [ ] 宽度 < 768px 时，桌面端导航栏隐藏（`hidden md:block`）
- [ ] 宽度 ≥ 768px 时，桌面端导航栏显示

---

### 二、移动端导航测试

#### 2.1 汉堡菜单显示测试

**测试步骤**：
1. 调整浏览器窗口宽度到小于 768px
2. 检查是否显示汉堡菜单图标（☰）

**预期结果**：
- [ ] 宽度 < 768px 时，显示汉堡菜单图标
- [ ] 宽度 ≥ 768px 时，隐藏汉堡菜单图标

---

#### 2.2 侧边抽屉打开/关闭测试

**测试步骤**：
1. 点击汉堡菜单图标
2. 检查侧边抽屉是否从左侧滑出
3. 点击菜单外部区域或按 Esc 键
4. 检查抽屉是否关闭

**预期结果**：
- [ ] 点击汉堡图标，抽屉从左侧滑出
- [ ] 抽屉宽度：小屏 280px，大屏 320px
- [ ] 点击外部区域，抽屉关闭
- [ ] 按 Esc 键，抽屉关闭

---

#### 2.3 移动端菜单项显示测试

**测试步骤**：
1. 打开移动端导航抽屉
2. 检查是否显示以下菜单项（从上到下）：

- [ ] 首页
- [ ] 策略中心
- [ ] 三层回测
- [ ] 传统回测
- [ ] 我的回测
- [ ] AI实验舱
- [ ] 数据同步
- [ ] 股票列表
- [ ] 系统设置

**预期结果**：所有 9 个菜单项垂直排列显示

---

#### 2.4 移动端导航功能测试

**测试步骤**：
1. 打开移动端导航抽屉
2. 点击任意菜单项
3. 检查页面是否跳转
4. 检查抽屉是否自动关闭

**预期结果**：
- [ ] 点击菜单项后，页面正确跳转
- [ ] 抽屉自动关闭（`onClick={() => setOpen(false)`）

---

#### 2.5 移动端当前页面高亮测试

**测试步骤**：
1. 访问不同页面
2. 打开移动端导航抽屉
3. 检查对应菜单项是否有蓝色背景高亮

**预期结果**：
- [ ] 当前页面的菜单项有蓝色背景（`bg-blue-100 dark:bg-blue-900/30`）
- [ ] 当前页面的文字显示为蓝色（`text-blue-600 dark:text-blue-400`）
- [ ] 其他菜单项显示为灰色

---

#### 2.6 移动端暗色模式测试

**测试步骤**：
1. 切换到暗色模式
2. 打开移动端导航抽屉
3. 检查颜色是否正确

**预期结果**：
- [ ] 抽屉背景：深色
- [ ] 高亮菜单项背景：深蓝色半透明（`dark:bg-blue-900/30`）
- [ ] 高亮菜单项文字：蓝色（`dark:text-blue-400`）
- [ ] 普通菜单项文字：浅灰色（`dark:text-gray-300`）

---

### 三、跨浏览器测试

#### 3.1 浏览器兼容性测试

| 浏览器 | 版本 | 桌面端导航 | 移动端导航 | 高亮功能 | 暗色模式 |
|--------|------|-----------|-----------|---------|---------|
| Chrome | 最新 | [ ] 通过 | [ ] 通过 | [ ] 通过 | [ ] 通过 |
| Firefox | 最新 | [ ] 通过 | [ ] 通过 | [ ] 通过 | [ ] 通过 |
| Safari | 最新 | [ ] 通过 | [ ] 通过 | [ ] 通过 | [ ] 通过 |
| Edge | 最新 | [ ] 通过 | [ ] 通过 | [ ] 通过 | [ ] 通过 |

---

### 四、性能测试

#### 4.1 导航栏加载时间

**测试步骤**：
1. 打开浏览器开发者工具（F12）
2. 切换到 Network 标签
3. 刷新页面
4. 观察导航栏渲染时间

**预期结果**：
- [ ] 导航栏在首次内容绘制（FCP）时立即可见
- [ ] 无明显的闪烁或重新渲染

---

#### 4.2 导航栏内存占用

**测试步骤**：
1. 打开浏览器开发者工具（F12）
2. 切换到 Performance 标签
3. 录制页面加载和导航切换
4. 检查内存占用

**预期结果**：
- [ ] 导航组件内存占用 < 1MB
- [ ] 切换导航时无内存泄漏

---

### 五、可访问性测试

#### 5.1 键盘导航测试

**测试步骤**：
1. 使用 Tab 键在导航项之间切换
2. 使用 Enter 键激活导航链接
3. 在移动端抽屉中使用 Esc 键关闭

**预期结果**：
- [ ] Tab 键可以顺序聚焦所有导航链接
- [ ] 聚焦的导航项有可见的焦点样式
- [ ] Enter 键可以激活链接
- [ ] Esc 键可以关闭移动端抽屉

---

#### 5.2 屏幕阅读器测试

**测试步骤**：
1. 启用屏幕阅读器（如 VoiceOver、NVDA）
2. 浏览导航栏
3. 检查是否正确读取导航项和当前状态

**预期结果**：
- [ ] 导航项标签被正确读取
- [ ] 汉堡菜单有 `<span className="sr-only">打开菜单</span>` 提示
- [ ] 移动端抽屉标题"导航菜单"被读取

---

### 六、边缘情况测试

#### 6.1 快速点击测试

**测试步骤**：
1. 快速连续点击不同的导航项
2. 检查是否有渲染错误或状态混乱

**预期结果**：
- [ ] 高亮状态正确切换
- [ ] 无 JavaScript 错误
- [ ] 页面正常跳转

---

#### 6.2 网络延迟测试

**测试步骤**：
1. 打开开发者工具，模拟慢速 3G 网络
2. 点击导航项
3. 检查导航是否仍然正常工作

**预期结果**：
- [ ] 导航切换即时响应（客户端路由）
- [ ] 高亮状态立即更新
- [ ] 页面内容异步加载

---

## 🐛 已知问题

### 问题 1：我的回测页面 404
- **状态**: ⚠️ 预期行为
- **原因**: 页面尚未开发（阶段二任务 2.2）
- **解决方案**: 等待阶段二完成

### 问题 2：AI 生成器未添加导航
- **状态**: ℹ️ 预期行为
- **原因**: 功能属于阶段三，暂未添加到主导航
- **解决方案**: 阶段三开发时再添加

---

## ✅ 测试完成标准

完成以上所有测试项，并满足以下条件：

- [ ] 所有已开发页面的导航功能正常
- [ ] 桌面端和移动端导航均正常工作
- [ ] 当前页面高亮功能正确
- [ ] 暗色模式正常显示
- [ ] 响应式设计正确切换
- [ ] 无 JavaScript 错误
- [ ] 无 TypeScript 类型错误
- [ ] 构建成功（`npm run build`）

---

## 📊 测试报告模板

```markdown
# 导航栏测试报告

**测试人员**: [姓名]
**测试日期**: [日期]
**测试环境**: [浏览器 + 版本]

## 测试结果汇总
- 通过项: XX / YY
- 失败项: XX / YY
- 未测试: XX / YY

## 问题列表
1. [问题描述]
   - 严重程度: [高/中/低]
   - 复现步骤: [步骤]
   - 预期结果: [预期]
   - 实际结果: [实际]

## 测试结论
- [ ] 通过
- [ ] 有问题需修复
- [ ] 需要重新测试
```

---

## 🚀 快速测试命令

```bash
# 1. 启动开发服务器
cd frontend
npm run dev

# 2. 构建验证
npm run build

# 3. 类型检查
npm run type-check

# 4. 代码格式检查
npm run lint
```

---

**文档维护者**: Claude Code
**最后更新**: 2026-02-07
**文档版本**: v1.0
