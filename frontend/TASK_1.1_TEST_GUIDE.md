# 任务 1.1 测试指南

## 快速测试

### 1. 启动开发服务器

```bash
cd /Volumes/MacDriver/stock-analysis/frontend
npm run dev
```

访问: http://localhost:3000/strategies

### 2. 基础功能测试清单

#### ✅ 页面加载
- [ ] 页面正常加载，无错误
- [ ] 显示"策略中心"标题
- [ ] 显示说明卡片
- [ ] 显示加载动画（如果API响应慢）
- [ ] 11个策略卡片全部显示

#### ✅ 搜索功能
```
测试步骤：
1. 在搜索框输入"动量"
   预期结果: 显示包含"动量"的组件（MomentumSelector）

2. 在搜索框输入"止损"
   预期结果: 显示包含"止损"的组件（FixedStopLoss, ATRStop等）

3. 在搜索框输入"xyz123"（不存在）
   预期结果: 显示"未找到匹配的策略"空状态
```

#### ✅ 筛选功能
```
测试步骤：
1. 点击"选股器"按钮
   预期结果: 只显示4个选股器卡片

2. 点击"入场策略"按钮
   预期结果: 只显示3个入场策略卡片

3. 点击"退出策略"按钮
   预期结果: 只显示4个退出策略卡片

4. 点击"全部"按钮
   预期结果: 显示全部11个组件

5. 点击"清除筛选"按钮
   预期结果: 恢复默认状态
```

#### ✅ 卡片显示
```
检查每个卡片是否包含：
- [ ] 层级图标和标签（🎯选股器 / 📈入场策略 / 📉退出策略）
- [ ] 分类标签（动量/反转/机器学习等）
- [ ] 组件名称
- [ ] 组件描述（最多2行）
- [ ] 版本号
- [ ] 参数数量
- [ ] 主要参数列表（最多3个）
- [ ] "查看详情"按钮
- [ ] "立即回测"按钮
```

#### ✅ 交互功能
```
测试步骤：
1. 悬停卡片
   预期结果: 卡片阴影增强，边框变蓝

2. 点击"立即回测"按钮
   预期结果: 跳转到 /backtest/three-layer?{layer}={id}

3. 点击"查看详情"按钮
   预期结果: 跳转到 /strategies/{id}（任务1.2待实现）
```

### 3. 响应式测试

#### 桌面端（宽度 > 1024px）
- [ ] 显示3列卡片网格
- [ ] 顶部导航栏显示"策略中心"链接
- [ ] "策略中心"链接高亮（蓝色）

#### 平板端（宽度 768px - 1024px）
- [ ] 显示2列卡片网格
- [ ] 顶部导航栏显示"策略中心"链接

#### 移动端（宽度 < 768px）
- [ ] 显示1列卡片（全宽）
- [ ] 汉堡菜单中显示"策略中心"
- [ ] 点击汉堡菜单，显示侧边栏
- [ ] 侧边栏中"策略中心"链接高亮

### 4. 暗色模式测试

```
测试步骤：
1. 点击右上角主题切换按钮
2. 切换到暗色模式
   预期结果:
   - [ ] 页面背景变为深色
   - [ ] 卡片背景变为深色
   - [ ] 文字颜色自动调整（保持可读性）
   - [ ] 搜索框边框和背景适配暗色
   - [ ] 按钮颜色适配暗色
   - [ ] 标签颜色适配暗色
```

### 5. 性能测试

```
检查项：
- [ ] 页面首次加载时间 < 2秒
- [ ] 搜索输入实时响应（无明显延迟）
- [ ] 筛选按钮点击立即响应
- [ ] 切换暗色模式流畅（无闪烁）
```

### 6. 错误处理测试

```
模拟场景：
1. 后端API未启动
   预期结果: Toast提示"加载策略组件失败"

2. 网络请求超时
   预期结果: 显示错误提示

注意: 需要后端服务运行在 http://localhost:8000
```

## 集成测试（需要后端运行）

### 启动后端服务

```bash
# 终端1: 启动数据库
cd /Volumes/MacDriver/stock-analysis
docker-compose up -d timescaledb redis

# 终端2: 启动后端
docker-compose up backend

# 终端3: 启动前端
cd frontend
npm run dev
```

### 验证API集成

访问: http://localhost:3000/strategies

预期结果:
- [ ] 从后端API成功加载组件列表
- [ ] 显示真实的组件名称和描述
- [ ] 显示真实的参数信息
- [ ] 点击"立即回测"可以正常跳转并预填参数

## 截图检查清单

建议截取以下场景的截图：

1. [ ] 默认状态（显示全部11个组件）
2. [ ] 搜索"动量"的结果
3. [ ] 筛选"选股器"的结果
4. [ ] 筛选"入场策略"的结果
5. [ ] 筛选"退出策略"的结果
6. [ ] 空状态（搜索无结果）
7. [ ] 暗色模式
8. [ ] 移动端视图
9. [ ] 平板端视图
10. [ ] 悬停卡片效果

## 已知限制

1. **策略详情页未实现**: 点击"查看详情"会跳转到404页面（任务1.2待完成）
2. **参数分类**: 当前基于ID字符串推断分类，未来可以从API获取
3. **无API Mock**: 开发时需要后端服务运行

## 下一步

完成测试后：
1. 记录发现的bug
2. 完成任务1.2：策略详情页开发
3. 添加E2E自动化测试

---

**文档版本**: v1.0
**更新日期**: 2026-02-07
