# AI ç­–ç•¥å®žéªŒèˆ± - å¿«é€Ÿå¼€å§‹æŒ‡å—

## ðŸš€ 5åˆ†é’Ÿå¿«é€Ÿä½“éªŒ

### å‰ç½®å‡†å¤‡

ç¡®ä¿å·²å®Œæˆï¼š
1. âœ… åŽç«¯æœåŠ¡è¿è¡Œï¼š`cd backend && uvicorn app.main:app --reload`
2. âœ… å‰ç«¯æœåŠ¡è¿è¡Œï¼š`cd frontend && npm run dev`
3. âœ… æ•°æ®åº“æœ‰æ•°æ®ï¼šè‡³å°‘æœ‰ä¸€åªè‚¡ç¥¨çš„åŽ†å²è¡Œæƒ…æ•°æ®

### Step 1: è®¿é—® AI å®žéªŒèˆ±

æµè§ˆå™¨æ‰“å¼€ï¼š`http://localhost:3000/ai-lab`

### Step 2: é…ç½®è®­ç»ƒå‚æ•°ï¼ˆå·¦ä¾§é¢æ¿ï¼‰

**åŸºç¡€é…ç½®**ï¼š
- è‚¡ç¥¨ä»£ç ï¼š`000001` ï¼ˆæˆ–ä»»ä½•å·²æœ‰æ•°æ®çš„è‚¡ç¥¨ï¼‰
- å¼€å§‹æ—¥æœŸï¼š`20200101`
- ç»“æŸæ—¥æœŸï¼š`20231231`
- æ¨¡åž‹ç±»åž‹ï¼šé€‰æ‹© `LightGBM`ï¼ˆé€Ÿåº¦å¿«ï¼Œé€‚åˆå¿«é€Ÿæµ‹è¯•ï¼‰
- ç›®æ ‡å‘¨æœŸï¼š`5å¤©`

**æ•°æ®å¤„ç†**ï¼š
- Scaler ç±»åž‹ï¼š`Robust`ï¼ˆæŽ¨èï¼Œå¯¹å¼‚å¸¸å€¼é²æ£’ï¼‰
- æ ·æœ¬å¹³è¡¡ï¼šâŒ ä¸å¯ç”¨ï¼ˆé¦–æ¬¡æµ‹è¯•å»ºè®®å…³é—­ï¼‰

### Step 3: å¼€å§‹è®­ç»ƒ

ç‚¹å‡» **"å¼€å§‹è®­ç»ƒ"** æŒ‰é’®

è§‚å¯Ÿè®­ç»ƒè¿›åº¦ï¼š
```
ðŸ“Š Step 1/7: æ•°æ®èŽ·å–... 20%
ðŸ“Š Step 2/7: æ•°æ®æ¸…æ´—... 30%
ðŸ“Š Step 3/7: ç‰¹å¾å·¥ç¨‹... 40%
ðŸ¤– Step 4/7: æ¨¡åž‹è®­ç»ƒä¸­... 80%
âœ… Step 5/7: æ¨¡åž‹è¯„ä¼°... 90%
ðŸ’¾ Step 6/7: ä¿å­˜æ¨¡åž‹... 95%
ðŸ“ Step 7/7: ç”ŸæˆæŠ¥å‘Š... 100%
```

â±ï¸ **é¢„è®¡è€—æ—¶**ï¼š
- LightGBMï¼š1-3 åˆ†é’Ÿ
- GRUï¼š10-30 åˆ†é’Ÿï¼ˆå–å†³äºŽæ•°æ®é‡å’Œç¡¬ä»¶ï¼‰

### Step 4: æŸ¥çœ‹è®­ç»ƒç»“æžœ

è®­ç»ƒå®ŒæˆåŽï¼Œå³ä¾§ä¼šè‡ªåŠ¨æ˜¾ç¤ºï¼š

**ç‰¹å¾é‡è¦æ€§ Top 20**ï¼š
- æ¨ªå‘æŸ±çŠ¶å›¾æ˜¾ç¤ºæœ€é‡è¦çš„ç‰¹å¾
- ä¾‹å¦‚ï¼š`ma_20`, `rsi_14`, `momentum_5` ç­‰

**æ€§èƒ½æŒ‡æ ‡**ï¼š
- **RMSE**ï¼šé¢„æµ‹è¯¯å·®ï¼ˆè¶Šå°è¶Šå¥½ï¼‰
- **RÂ²**ï¼šæ‹Ÿåˆä¼˜åº¦ï¼ˆè¶ŠæŽ¥è¿‘1è¶Šå¥½ï¼‰
- **IC**ï¼šä¿¡æ¯ç³»æ•°ï¼ˆè¶Šå¤§è¶Šå¥½ï¼Œ> 0.05 å¯ç”¨ï¼‰
- **Rank IC**ï¼šæŽ’åºç›¸å…³æ€§ï¼ˆ> 0.03 å¯ç”¨ï¼‰

### Step 5: è¿è¡Œé¢„æµ‹

1. åœ¨ **æ¨¡åž‹ä»“åº“** ä¸­æ‰¾åˆ°åˆšè®­ç»ƒçš„æ¨¡åž‹
2. ç‚¹å‡»æ¨¡åž‹å¡ç‰‡ï¼ˆé«˜äº®é€‰ä¸­ï¼‰
3. ç‚¹å‡» **"è¿è¡Œé¢„æµ‹"** æŒ‰é’®
4. ç­‰å¾…å‡ ç§’ï¼ŒæŸ¥çœ‹é¢„æµ‹ç»“æžœ

### Step 6: æŸ¥çœ‹é¢„æµ‹å¯¹é½å›¾

**é¢„æµ‹å€¼ VS å®žé™…å€¼å¯¹é½å›¾** ä¼šæ˜¾ç¤ºï¼š
- ðŸ”´ **çº¢è‰²çº¿**ï¼šé¢„æµ‹ä¸Šæ¶¨ï¼ˆé¢„æµ‹å€¼ > 0ï¼‰
- ðŸ”µ **è“è‰²çº¿**ï¼šé¢„æµ‹ä¸‹è·Œï¼ˆé¢„æµ‹å€¼ â‰¤ 0ï¼‰
- âšª **ç°è‰²çº¿**ï¼šå®žé™…æ”¶ç›ŠçŽ‡

**äº¤äº’æ“ä½œ**ï¼š
- ðŸ–±ï¸ æ»šè½®ç¼©æ”¾
- ðŸ“Š æ‹–åŠ¨ä¸‹æ–¹æ»‘å—æŸ¥çœ‹ä¸åŒæ—¶é—´æ®µ
- ðŸ’¡ é¼ æ ‡æ‚¬åœæŸ¥çœ‹è¯¦ç»†æ•°å€¼

### Step 7: æŸ¥çœ‹ç‰¹å¾å¿«ç…§ï¼ˆå¯é€‰ï¼‰

åœ¨ **ç‰¹å¾å¿«ç…§æŸ¥çœ‹å™¨** ä¸­ï¼š
1. ç‚¹å‡»ä»»æ„äº¤æ˜“æ—¥ï¼ˆä¾‹å¦‚ï¼š`12-03`ï¼‰
2. å¼¹çª—æ˜¾ç¤ºè¯¥æ—¥æœŸçš„æ‰€æœ‰ç‰¹å¾å€¼
3. æ£€æŸ¥æ˜¯å¦æœ‰å¼‚å¸¸å€¼ï¼ˆæ˜¾ç¤ºä¸ºçº¢è‰²"å¼‚å¸¸å€¼"ï¼‰

**ä½¿ç”¨åœºæ™¯**ï¼š
- ðŸ” è°ƒè¯•æ•°æ®é—®é¢˜ï¼ˆä¾‹å¦‚ï¼šè‚¡ç¥¨åœç‰Œå¯¼è‡´çš„ NaNï¼‰
- ðŸ§  ç†è§£æ¨¡åž‹ä¸ºä»€ä¹ˆåšå‡ºæŸä¸ªé¢„æµ‹

### Step 8: ä¸€é”®å›žæµ‹ï¼ˆå¯é€‰ï¼‰

åœ¨ **ç­–ç•¥å›žæµ‹** é¢æ¿ï¼š
1. ç¡®ä¿æ¨¡åž‹å·²é€‰ä¸­
2. ç‚¹å‡» **"ä¸€é”®å›žæµ‹ï¼ˆé»˜è®¤å‚æ•°ï¼‰"**
3. ç³»ç»Ÿè‡ªåŠ¨è·³è½¬åˆ°å›žæµ‹é¡µé¢
4. æŸ¥çœ‹ç­–ç•¥æ”¶ç›Šæ›²çº¿ã€å¤æ™®æ¯”çŽ‡ç­‰æŒ‡æ ‡

**é»˜è®¤ç­–ç•¥é€»è¾‘**ï¼š
```
å¦‚æžœ é¢„æµ‹ä¸Šæ¶¨ > 1%  â†’ ä¹°å…¥
å¦‚æžœ é¢„æµ‹ä¸‹è·Œ < -1% â†’ å–å‡º
```

---

## ðŸ“Š å®Œæ•´åŠŸèƒ½æµ‹è¯•æµç¨‹

### æµ‹è¯•åœºæ™¯ 1ï¼šå¤šæ¨¡åž‹å¯¹æ¯”

1. è®­ç»ƒ LightGBM æ¨¡åž‹ï¼ˆ5å¤©å‘¨æœŸï¼‰
2. è®­ç»ƒ GRU æ¨¡åž‹ï¼ˆ5å¤©å‘¨æœŸï¼‰
3. è®­ç»ƒ LightGBM æ¨¡åž‹ï¼ˆ10å¤©å‘¨æœŸï¼‰
4. åœ¨æ¨¡åž‹ä»“åº“ä¸­å¯¹æ¯”ä¸‰ä¸ªæ¨¡åž‹çš„ IC å’Œ Rank IC
5. é€‰æ‹©æ€§èƒ½æœ€å¥½çš„æ¨¡åž‹è¿›è¡Œé¢„æµ‹

### æµ‹è¯•åœºæ™¯ 2ï¼šå‚æ•°è°ƒä¼˜

**å¯¹ç…§ç»„**ï¼ˆbaselineï¼‰ï¼š
- Scaler: `Robust`
- æ ·æœ¬å¹³è¡¡: âŒ

**å®žéªŒç»„**ï¼š
- Scaler: `Standard`
- æ ·æœ¬å¹³è¡¡: âœ… (`SMOTE`)

å¯¹æ¯”ä¸¤ä¸ªæ¨¡åž‹çš„æ€§èƒ½æŒ‡æ ‡ï¼Œé€‰æ‹©æ›´å¥½çš„é…ç½®ã€‚

### æµ‹è¯•åœºæ™¯ 3ï¼šç‰¹å¾é€‰æ‹©ï¼ˆéœ€è¦åŽç«¯æ”¯æŒï¼‰

ç›®å‰æ”¯æŒï¼š
- âœ… æŠ€æœ¯æŒ‡æ ‡ï¼ˆ60+ï¼‰
- âœ… Alpha å› å­ï¼ˆ20+ï¼‰

æœªæ¥å¯ä»¥é€šè¿‡ UI ç•Œé¢æ‰‹åŠ¨é€‰æ‹©ç‰¹å¾å­é›†ã€‚

---

## ðŸ› å¸¸è§é—®é¢˜

### Q1: è®­ç»ƒå¤±è´¥ï¼Œæ˜¾ç¤º"æ•°æ®ä¸è¶³"

**åŽŸå› **ï¼šæ•°æ®åº“ä¸­è¯¥è‚¡ç¥¨çš„åŽ†å²æ•°æ®å¤ªå°‘

**è§£å†³**ï¼š
1. å…ˆä½¿ç”¨"æ•°æ®åŒæ­¥"åŠŸèƒ½è¡¥å……æ•°æ®
2. æˆ–è€…ç¼©çŸ­è®­ç»ƒæ—¥æœŸèŒƒå›´

### Q2: é¢„æµ‹ç»“æžœå…¨æ˜¯ NaN

**åŽŸå› **ï¼š
1. è‚¡ç¥¨åœç‰Œå¯¼è‡´ç‰¹å¾ç¼ºå¤±
2. æ•°æ®ç¼©æ”¾å™¨å¼‚å¸¸

**è§£å†³**ï¼š
1. ä½¿ç”¨ç‰¹å¾å¿«ç…§æŸ¥çœ‹å™¨æ£€æŸ¥æ•°æ®è´¨é‡
2. æ›´æ¢ Scaler ç±»åž‹ï¼ˆå°è¯• `Robust`ï¼‰
3. æŽ’é™¤åœç‰ŒæœŸé—´çš„æ•°æ®

### Q3: æ¨¡åž‹ IC å¾ˆä½Žï¼ˆ< 0.01ï¼‰

**åŽŸå› **ï¼š
1. å¸‚åœºæœ‰æ•ˆæ€§å¼ºï¼Œéš¾ä»¥é¢„æµ‹
2. ç‰¹å¾å·¥ç¨‹ä¸å¤Ÿå……åˆ†
3. ç›®æ ‡å‘¨æœŸè®¾ç½®ä¸åˆç†

**å»ºè®®**ï¼š
1. å°è¯•ä¸åŒçš„ç›®æ ‡å‘¨æœŸï¼ˆ5å¤© vs 10å¤© vs 20å¤©ï¼‰
2. ä½¿ç”¨å¤šä¸ªæ¨¡åž‹é›†æˆï¼ˆæœªæ¥åŠŸèƒ½ï¼‰
3. æ·»åŠ æ›´å¤š Alpha å› å­

### Q4: GRU è®­ç»ƒå¤ªæ…¢

**åŽŸå› **ï¼šæ·±åº¦å­¦ä¹ æ¨¡åž‹è®¡ç®—å¯†é›†

**è§£å†³**ï¼š
1. å‡å°‘ Epochsï¼ˆ100 â†’ 50ï¼‰
2. ç¼©çŸ­è®­ç»ƒæ—¥æœŸèŒƒå›´
3. ä½¿ç”¨ GPUï¼ˆéœ€é…ç½® PyTorch GPU ç‰ˆæœ¬ï¼‰
4. ä¼˜å…ˆä½¿ç”¨ LightGBM è¿›è¡Œå¿«é€Ÿå®žéªŒ

### Q5: å›žæµ‹ç»“æžœå’Œé¢„æµ‹ä¸åŒ¹é…

**åŽŸå› **ï¼š
1. å›žæµ‹ç­–ç•¥é˜ˆå€¼è®¾ç½®ï¼ˆé»˜è®¤ Â±1%ï¼‰
2. äº¤æ˜“æˆæœ¬ï¼ˆä½£é‡‘ã€æ»‘ç‚¹ï¼‰
3. å›žæµ‹æœªè€ƒè™‘å¸‚åœºæµåŠ¨æ€§

**è¯´æ˜Ž**ï¼š
- é¢„æµ‹å€¼æ˜¯"æœªæ¥æ”¶ç›ŠçŽ‡é¢„æµ‹"
- å›žæµ‹æ˜¯"å®žé™…äº¤æ˜“ç­–ç•¥æ¨¡æ‹Ÿ"
- ä¸¤è€…å­˜åœ¨å·®å¼‚æ˜¯æ­£å¸¸çš„

---

## ðŸŽ¯ æ€§èƒ½è°ƒä¼˜å»ºè®®

### æ•°æ®å±‚é¢

1. **æ—¶é—´èŒƒå›´**ï¼š
   - è®­ç»ƒé›†ï¼š2-3å¹´æ•°æ®ï¼ˆå¤ªå°‘æ¬ æ‹Ÿåˆï¼Œå¤ªå¤šè¿‡æ‹Ÿåˆï¼‰
   - éªŒè¯é›†ï¼š15-20% çš„æ•°æ®
   - æµ‹è¯•é›†ï¼š15-20% çš„æ•°æ®

2. **æ•°æ®æ¸…æ´—**ï¼š
   - ä½¿ç”¨ Robust Scaler å¤„ç†å¼‚å¸¸å€¼
   - å¯ç”¨æ ·æœ¬å¹³è¡¡ï¼ˆå¦‚æžœæ¶¨è·Œæ ·æœ¬ä¸¥é‡ä¸å¹³è¡¡ï¼‰

### æ¨¡åž‹å±‚é¢

1. **LightGBM**ï¼š
   - Early Stopping Rounds: 50ï¼ˆé˜²æ­¢è¿‡æ‹Ÿåˆï¼‰
   - é€‚åˆï¼šå¿«é€Ÿå®žéªŒã€ç‰¹å¾é‡è¦æ€§åˆ†æž

2. **GRU**ï¼š
   - Sequence Length: 20ï¼ˆæ ¹æ®æ•°æ®å‘¨æœŸè°ƒæ•´ï¼‰
   - Epochs: 100-200
   - é€‚åˆï¼šæ•æ‰æ—¶é—´åºåˆ—é•¿æœŸä¾èµ–

### ç‰¹å¾å±‚é¢

1. **æŠ€æœ¯æŒ‡æ ‡**ï¼š
   - MA (5, 10, 20, 60, 120, 250)
   - RSI (6, 12, 24)
   - MACD, KDJ, BOLL

2. **Alpha å› å­**ï¼š
   - Momentum (5, 10, 20, 60)
   - Reversal (1, 3, 5, 20)
   - Volatility (5, 10, 20)

---

## ðŸ“ˆ è¿›é˜¶ä½¿ç”¨

### 1. å¤šè‚¡ç¥¨è®­ç»ƒ

```python
# æ‰¹é‡è®­ç»ƒè„šæœ¬ï¼ˆæœªæ¥åŠŸèƒ½ï¼‰
symbols = ['000001', '000002', '600519', '600036']
for symbol in symbols:
    train_model(symbol, model_type='lightgbm', target_period=5)
```

### 2. æ¨¡åž‹é›†æˆ

```python
# é›†æˆå¤šä¸ªæ¨¡åž‹çš„é¢„æµ‹ï¼ˆæœªæ¥åŠŸèƒ½ï¼‰
ensemble_prediction = (
    0.4 * lightgbm_pred +
    0.3 * gru_pred +
    0.3 * xgboost_pred
)
```

### 3. åœ¨çº¿å­¦ä¹ 

```python
# å®šæœŸæ›´æ–°æ¨¡åž‹ï¼ˆæœªæ¥åŠŸèƒ½ï¼‰
# æ¯å‘¨ä½¿ç”¨æœ€æ–°æ•°æ®å¢žé‡è®­ç»ƒ
update_model_weekly(model_id='abc123')
```

---

## ðŸ”— ç›¸å…³æ–‡æ¡£

- [å®Œæ•´å®žçŽ°æ–‡æ¡£](./AI_LAB_IMPLEMENTATION.md)
- [DataPipeline ä½¿ç”¨æŒ‡å—](./core/README_DATAPIPELINE.md)
- [æ¨¡åž‹è®­ç»ƒ API æ–‡æ¡£](http://localhost:8000/docs#/æœºå™¨å­¦ä¹ )

---

**ç¥æ‚¨è®­ç»ƒæ„‰å¿«ï¼ðŸŽ‰**

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹å®Œæ•´å®žçŽ°æ–‡æ¡£æˆ–è”ç³»å¼€å‘è€…ã€‚
